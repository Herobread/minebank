(this["webpackJsonpminebank-layout"]=this["webpackJsonpminebank-layout"]||[]).push([[0],{32:function(e,t,n){},41:function(e,t,n){},42:function(e,t,n){},43:function(e,t,n){},44:function(e,t,n){},48:function(e,t,n){},49:function(e,t,n){"use strict";n.r(t);var c=n(8),a=n(35),s=n.n(a),r=(n(41),n(12)),i=(n(42),n(43),n(32),n(44),n(6));function u(){return Object(i.jsxs)("footer",{children:[Object(i.jsx)("p",{children:"Minebank"}),Object(i.jsx)("a",{href:"https://github.com/",children:"Github"})]})}var o=n(0),j=n.n(o),l=n(1),b=n(21),d=n(11),O=n(36),m=n(24),p=n(15),h=Object(O.a)({apiKey:"AIzaSyA4HcFGhb9HTjiCYzymF4cfDM2fl4VU6U4",authDomain:"minebank-r1.firebaseapp.com",projectId:"minebank-r1",storageBucket:"minebank-r1.appspot.com",messagingSenderId:"401386178744",appId:"1:401386178744:web:0dae54f704bff03a6d4c4d"}),x=Object(p.c)(h),f=Object(m.b)(),v=Object(c.createContext)({currentUser:null,register:function(){return Promise},login:function(){return Promise},logout:function(){return Promise},transfer:function(){return Promise},getUserData:function(){return Promise}}),g=function(){return Object(c.useContext)(v)};function N(e){var t=e.children,n=Object(c.useState)(null),a=Object(d.a)(n,2),s=a[0],r=a[1];function u(){return(u=Object(l.a)(j.a.mark((function e(t,n,c){var a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Object(p.a)(x,"userRefs",c),e.next=3,Object(p.b)(a);case 3:if(void 0===e.sent.data()){e.next=6;break}return e.abrupt("return","user-error");case 6:return e.next=8,Object(m.a)(f,t,n).then((function(e){try{Object(p.d)(Object(p.a)(x,"users",e.user.uid),{diamonds:10,nickname:c,transactions:[{who:"Minebank",amount:"+10",description:"Welcome to Minebank!"}]}),Object(p.d)(Object(p.a)(x,"userRefs",c),{uid:e.user.uid})}catch(t){console.error("Error adding document: ",t)}}));case 8:return e.abrupt("return",e.sent);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function o(){return(o=Object(l.a)(j.a.mark((function e(t){var n,c;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object(p.a)(x,"users",t),e.next=3,Object(p.b)(n);case 3:if(!(c=e.sent).exists()){e.next=8;break}return e.abrupt("return",c.data());case 8:return console.log("No such document!"),e.abrupt("return");case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function b(){return(b=Object(l.a)(j.a.mark((function e(t,n,c,a){var r,i,u,o,l,b,d;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(p.b)(Object(p.a)(x,"userRefs",t));case 2:if(!(r=e.sent).exists()){e.next=27;break}return i=r.data().uid,u=s.uid,e.next=8,Object(p.b)(Object(p.a)(x,"users",u));case 8:return o=e.sent,l=o.data().transactions,o=o.data().diamonds,e.next=13,Object(p.b)(Object(p.a)(x,"users",i));case 13:if(b=e.sent,d=b.data().transactions,b=b.data().diamonds,!(o-n>=0)){e.next=24;break}return l.push({amount:"-".concat(n),who:"".concat(t),description:"".concat(c)}),e.next=20,Object(p.e)(Object(p.a)(x,"users",u),{diamonds:o-n,transactions:l});case 20:return d.push({amount:"+".concat(n),who:"".concat(a),description:"".concat(c)}),e.next=23,Object(p.e)(Object(p.a)(x,"users",i),{diamonds:parseFloat(b)+parseFloat(n),transactions:d});case 23:return e.abrupt("return","success");case 24:return e.abrupt("return","You don`t have enough money for this");case 27:return e.abrupt("return",'User "'.concat(t,'" doesn`t exist'));case 28:case"end":return e.stop()}}),e)})))).apply(this,arguments)}Object(c.useEffect)((function(){var e=Object(m.c)(f,(function(e){r(e)}));return function(){e()}}),[]);var O={currentUser:s,register:function(e,t,n){return u.apply(this,arguments)},login:function(e,t){return Object(m.d)(f,e,t)},logout:function(){return Object(m.e)(f)},getUserData:function(e){return o.apply(this,arguments)},transfer:function(e,t,n,c){return b.apply(this,arguments)}};return Object(i.jsx)(v.Provider,{value:O,children:t})}n(48);function y(e){var t=Object(r.g)(),n=g(),c=n.logout,a=n.currentUser;return Object(i.jsxs)("div",{className:"topbar",children:[Object(i.jsxs)(b.b,{to:"/home",className:"link left",children:["Minebank",Object(i.jsx)("sup",{children:"beta"})]}),a?Object(i.jsx)("p",{className:"link right login",onClick:function(){var e=Object(l.a)(j.a.mark((function e(n){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.preventDefault(),c(),t("/home");case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),children:"Log out"}):Object(i.jsx)(b.b,{className:"link right login",to:"/login",children:"Log in"})]})}function k(){var e=Object(r.g)();return Object(i.jsxs)("div",{className:"container",children:[Object(i.jsx)(y,{}),Object(i.jsx)("div",{className:"frame",children:Object(i.jsxs)("div",{className:"frame-content",children:[Object(i.jsx)("h1",{className:"header",children:"Easy way to pay - Minebank"}),Object(i.jsx)(w,{}),Object(i.jsx)("button",{onClick:function(){e("/signup")},className:"button center",children:"Get card"})]})}),Object(i.jsxs)("div",{className:"frame card",children:[Object(i.jsx)("h1",{className:"header",children:"Why Minebank?"}),Object(i.jsxs)("div",{className:"info",children:[Object(i.jsxs)("div",{className:"container-info",children:[Object(i.jsx)("h1",{className:"ci-header",children:"1. No payment fee "}),Object(i.jsx)("p",{children:"We don`t charge any money for payments."})]}),Object(i.jsxs)("div",{className:"container-info",children:[Object(i.jsx)("h1",{className:"ci-header",children:"2. Easy to use"}),Object(i.jsx)("p",{children:"App is easy to use, just create an account and you are ready to do some transactions."})]}),Object(i.jsxs)("div",{className:"container-info",children:[Object(i.jsx)("h1",{className:"ci-header",children:"3. Great customer service"}),Object(i.jsx)("p",{children:"We value our customers providing timely, attentive, upbeat service to a customer."})]})]})]}),Object(i.jsx)(u,{})]})}function w(){return Object(i.jsxs)("div",{className:"card-panel",children:[Object(i.jsx)("p",{className:"card-num",children:"1234 5678 9876 5678"}),Object(i.jsx)("p",{className:"card-info",children:"minepay"})]})}function S(e){return!0===e.success?Object(i.jsx)("div",{className:"error-panel success-panel",children:e.text}):Object(i.jsx)("div",{className:"error-panel",children:e.text})}function C(){var e=Object(c.useState)(""),t=Object(d.a)(e,2),n=t[0],a=t[1],s=Object(c.useState)(!1),u=Object(d.a)(s,2),o=u[0],O=u[1],m=Object(c.useState)(""),p=Object(d.a)(m,2),h=p[0],x=p[1],f=Object(c.useState)(""),v=Object(d.a)(f,2),N=v[0],k=v[1],w=g(),C=w.login,U=w.currentUser;function P(){return(P=Object(l.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:h&&N&&(O(!0),C(h,N).then((function(e){return console.log(e)})).catch((function(e){a(e.message)})).then(O(!1)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(i.jsxs)("div",{children:[U?Object(i.jsx)(r.a,{to:"/user"}):"",Object(i.jsx)(y,{}),Object(i.jsx)("div",{className:"main-container",children:Object(i.jsxs)("div",{className:"transfer-container",children:[Object(i.jsx)("p",{className:"partition-name center",children:"Welcome back!"}),Object(i.jsx)("p",{className:"tc-name",children:"Username:"}),Object(i.jsx)("input",{value:h,onChange:function(e){return x(e.target.value)},className:"input",type:"text",placeholder:"example@gmail.com"}),Object(i.jsx)("p",{className:"tc-name",children:"Password:"}),Object(i.jsx)("input",{value:N,onChange:function(e){return k(e.target.value)},className:"input",type:"password",placeholder:""}),Object(i.jsx)("button",{disabled:o,onClick:function(){return P.apply(this,arguments)},className:"button",children:"Log in"}),Object(i.jsxs)("p",{className:"subtext",children:["Don`t have an acoount? ",Object(i.jsx)(b.b,{className:"link",to:"/signup",children:"Sign up"})]}),""===n?"":Object(i.jsx)(S,{text:n})]})})]})}function U(){var e=Object(c.useState)(!1),t=Object(d.a)(e,2),n=t[0],a=t[1],s=Object(c.useState)(""),u=Object(d.a)(s,2),o=u[0],O=u[1],m=Object(c.useState)(""),p=Object(d.a)(m,2),h=p[0],x=p[1],f=Object(c.useState)(""),v=Object(d.a)(f,2),N=v[0],k=v[1],w=Object(c.useState)(""),C=Object(d.a)(w,2),U=C[0],P=C[1],D=g().currentUser,E=g().register;return Object(i.jsxs)("div",{children:[D?Object(i.jsx)(r.a,{to:"/user"}):"",Object(i.jsx)(y,{}),Object(i.jsx)("div",{className:"main-container",children:Object(i.jsxs)("div",{className:"transfer-container",id:"auth",children:[Object(i.jsx)("p",{className:"partition-name center",children:"Sign up"}),Object(i.jsx)("p",{className:"tc-name",children:"Your nickname:"}),Object(i.jsx)("input",{value:h,onChange:function(e){return x(e.target.value)},className:"input",type:"text",placeholder:""}),Object(i.jsx)("p",{className:"tc-name",children:"Email:"}),Object(i.jsx)("input",{value:o,onChange:function(e){return O(e.target.value)},className:"input",type:"text",placeholder:"example@gmail.com"}),Object(i.jsx)("p",{className:"tc-name",children:"Password:"}),Object(i.jsx)("input",{value:N,onChange:function(e){return k(e.target.value)},className:"input",type:"password",placeholder:""}),Object(i.jsx)("button",{disabled:n,onClick:function(){var e=Object(l.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o&&N&&h?(t.preventDefault(),a(!0),E(o,N,h).then((function(e){e&&"user-error"===e&&P("Firebase: Error (auth/nickname-already-in-use)")})).catch((function(e){P(e.message)})).finally((function(){a(!1)}))):P("Please enter valid user data");case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),className:"button",children:"Register"}),Object(i.jsxs)("p",{className:"subtext",children:["Already have an acoount? ",Object(i.jsx)(b.b,{className:"link",to:"/login",children:"Log in"})]}),""===U?"":Object(i.jsx)(S,{text:U})]})})]})}var P=n(4);function D(){var e=g(),t=e.currentUser,n=e.getUserData,a=Object(c.useState)({diamonds:"-"}),s=Object(d.a)(a,2),o=s[0],j=s[1];return Object(c.useEffect)((function(){t&&n(t.uid).then((function(e){j(e)}))}),[]),Object(i.jsxs)("div",{children:[t?"":Object(i.jsx)(r.a,{to:"/login"}),Object(i.jsx)(y,{}),Object(i.jsxs)("div",{className:"main-container",children:[Object(i.jsx)(E,{text:"Hello, ".concat(t?o.nickname:"anon","!")}),Object(i.jsx)(F,{amount:o.diamonds}),Object(i.jsx)(E,{text:"Transfer"}),Object(i.jsx)(M,{data:o}),Object(i.jsx)(E,{text:"All transactions"}),Object(i.jsx)(L,{data:o.transactions})]}),Object(i.jsx)(u,{})]})}function E(e){return Object(i.jsx)("div",{children:Object(i.jsx)("p",{className:"partition-name",children:e.text})})}function F(e){return Object(i.jsxs)("div",{className:"wide-card",children:[Object(i.jsxs)("p",{className:"wc-amount",children:[Object(i.jsx)("span",{className:"big-font",children:e.amount})," diamonds"]}),Object(i.jsx)("p",{className:"wc-system",children:"minepay"})]})}function M(e){var t=g().transfer,n=e.data,a=Object(c.useState)(null),s=Object(d.a)(a,2),r=s[0],u=s[1],o=Object(c.useState)(null),j=Object(d.a)(o,2),l=j[0],b=j[1],O=Object(c.useState)("Money transfer"),m=Object(d.a)(O,2),p=m[0],h=m[1],x=Object(c.useState)(!1),f=Object(d.a)(x,2),v=f[0],N=f[1],y=Object(c.useState)(null),k=Object(d.a)(y,2),w=k[0],C=k[1],U=Object(c.useState)("ok"),D=Object(d.a)(U,2),E=D[0],F=D[1];return Object(i.jsxs)("div",{className:"transfer-container",children:[Object(i.jsx)("p",{className:"tc-name",children:"To:"}),Object(i.jsx)("input",{className:"input",type:"text",placeholder:"recipient nickname",onChange:function(e){u(e.target.value)}}),Object(i.jsx)("p",{className:"tc-name",children:"Amount:"}),Object(i.jsx)("input",{className:"input",type:"number",placeholder:"",onChange:function(e){b(e.target.value)},max:10,step:"1"}),Object(i.jsx)("p",{className:"tc-name",children:"Description:"}),Object(i.jsx)("input",Object(P.a)({className:"input",type:"text",placeholder:"",onChange:function(e){h(e.target.value)},maxLength:100},"placeholder","Money transfer")),!0===v?Object(i.jsx)("button",{className:"button disabled",disabled:!0,children:"Sending..."}):Object(i.jsx)("button",{className:"button",onClick:function(){N(!0),r&&l?r===n.nickname?(C("error"),F("Error: you can`t transfer money to yourself"),N(!1)):t(r,l,p,n.nickname).then((function(e){N(!1),"success"!==e?(C("error"),F(e)):(C("ok"),F("Payment successfull"))})):(C("error"),F("Error: please enter valid data"),N(!1))},children:"Send"}),null===w?"":"ok"===w?Object(i.jsx)(S,{text:E,success:!0}):Object(i.jsx)(S,{text:E,success:!1})]})}function L(e){var t=e.data,n=[];if(console.log(t),void 0!==t)for(var c=Object.keys(t).length-1;c>=0;c-=1)n.push(Object(i.jsx)(A,{name:t[c].who,desc:t[c].description,amount:t[c].amount})),console.log(c);return Object(i.jsx)("div",{children:n})}function A(e){return Object(i.jsxs)("div",{className:"transaction-card",children:[Object(i.jsx)("div",{className:"ts-img"}),Object(i.jsx)("p",{className:"ts-name",children:e.name}),Object(i.jsx)("p",{className:"ts-desc",children:e.desc}),Object(i.jsx)("p",{className:"ts-amount "+("+"===e.amount[0]?"green":""),children:e.amount})]})}var I=function(){return Object(i.jsx)(N,{children:Object(i.jsxs)(r.d,{children:[Object(i.jsx)(r.b,{path:"*",element:Object(i.jsx)(k,{})}),Object(i.jsx)(r.b,{path:"user",element:Object(i.jsx)(D,{})}),Object(i.jsx)(r.b,{path:"login",element:Object(i.jsx)(C,{})}),Object(i.jsx)(r.b,{path:"signup",element:Object(i.jsx)(U,{})})]})})},T=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,50)).then((function(t){var n=t.getCLS,c=t.getFID,a=t.getFCP,s=t.getLCP,r=t.getTTFB;n(e),c(e),a(e),s(e),r(e)}))};s.a.render(Object(i.jsx)(b.a,{children:Object(i.jsx)(I,{})}),document.getElementById("root")),T()}},[[49,1,2]]]);
//# sourceMappingURL=main.39527a78.chunk.js.map