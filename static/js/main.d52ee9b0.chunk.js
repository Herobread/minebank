(this["webpackJsonpminebank-layout"]=this["webpackJsonpminebank-layout"]||[]).push([[0],{32:function(e,t,n){},53:function(e,t,n){},54:function(e,t,n){},55:function(e,t,n){},56:function(e,t,n){},60:function(e,t,n){},66:function(e,t,n){},67:function(e,t,n){},68:function(e,t,n){},69:function(e,t,n){"use strict";n.r(t);var c=n(4),a=n(26),r=n.n(a),s=(n(53),n(13)),i=(n(54),n(55),n(32),n(56),n(1));function o(){return Object(i.jsxs)("footer",{children:[Object(i.jsx)("p",{children:"Minebank"}),Object(i.jsx)("a",{href:"https://github.com/",children:"Github"})]})}var u=n(0),d=n.n(u),j=n(2),l=n(18),b=n(9),p=n(46),m=n(28),O=n(14),h=Object(p.a)({apiKey:"AIzaSyA4HcFGhb9HTjiCYzymF4cfDM2fl4VU6U4",authDomain:"minebank-r1.firebaseapp.com",projectId:"minebank-r1",storageBucket:"minebank-r1.appspot.com",messagingSenderId:"401386178744",appId:"1:401386178744:web:0dae54f704bff03a6d4c4d"}),x=Object(O.f)(h),f=Object(m.b)(),v=Object(c.createContext)({currentUser:null,register:function(){return Promise},login:function(){return Promise},logout:function(){return Promise},transfer:function(){return Promise},getUserData:function(){return Promise},createProduct:function(){return Promise},getAllProducts:function(){return Promise},getProduct:function(){return Promise},addReview:function(){return Promise},updateProduct:function(){return Promise},updateProfile:function(){return Promise},buyProduct:function(){return Promise},updateOrderStatus:function(){return Promise}}),g=function(){return Object(c.useContext)(v)};function N(e){var t=e.children,n=Object(c.useState)(null),a=Object(b.a)(n,2),r=a[0],s=a[1];function o(){return(o=Object(j.a)(d.a.mark((function e(t,n,c,a,r,s,i){var o,u;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o={img:t,name:n,price:c,description:a,by:r,uid:s,reviews:[]},e.next=3,Object(O.a)(Object(O.b)(x,"goods"),o);case 3:return u=e.sent,i.push(u.id),e.next=7,Object(O.h)(Object(O.c)(x,"users",s),{goods:i});case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function u(){return(u=Object(j.a)(d.a.mark((function e(t,n,c,a,r){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(O.h)(Object(O.c)(x,"goods",t),{img:n,name:c,price:a,description:r});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function l(){return(l=Object(j.a)(d.a.mark((function e(t,n,c,a){var r,s,i,o;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.price,s=(new Date).getTime()+"#"+99e4*Math.random()+9999,c.recieved.push({_key:s,from:t.by,price:r,name:t.name,img:t.img,address:c.address,done:!1,status:0}),!(parseInt(c.diamonds)-parseInt(r)<0)){e.next=5;break}return e.abrupt("return","Not enough money to buy "+t.name+"("+(parseInt(r)-parseInt(c.diamonds))+" more needed)");case 5:return c.diamonds=parseInt(c.diamonds)-parseInt(r),e.next=8,y(n);case 8:if(i=e.sent,c.nickname!==i.nickname){e.next=11;break}return e.abrupt("return","You can`t by your product");case 11:return(o=i.requested).push({buyer:a,name:c.nickname,product:{price:r,img:t.img,address:c.address,name:t.name},status:0,done:!1,_key:s}),i={diamonds:parseInt(i.diamonds)+parseInt(r),requested:o},e.next=16,P(n,i);case 16:return e.next=18,P(a,c);case 18:return e.abrupt("return","ok");case 19:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function p(){return(p=Object(j.a)(d.a.mark((function e(t,n,c,a,r,s){var i,o;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(O.d)(Object(O.c)(x,"users",t.buyer));case 2:if(i=e.sent.data(),console.log(t._key),o=!0,i.recieved.forEach((function(e,n){e._key===t._key&&(i.recieved[n].status=c,!0===i.recieved[n].done&&(o=!1),i.recieved[n].done=a,console.log(n))})),o){e.next=10;break}return e.abrupt("return","Status already updated");case 10:return n.requested[r].status=c,n.requested[r].done=a,-1===c&&(n.diamonds=parseInt(n.diamonds)-parseInt(t.product.price),i.diamonds=parseInt(i.diamonds)+parseInt(t.product.price)),e.next=15,P(s,n);case 15:return e.next=17,P(t.buyer,i);case 17:return e.abrupt("return","Updated");case 18:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function h(){return(h=Object(j.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(O.e)(Object(O.b)(x,"goods"));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function g(){return(g=Object(j.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(O.d)(Object(O.c)(x,"goods",t));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function N(){return(N=Object(j.a)(d.a.mark((function e(t,n,c,a){var r,s;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(O.d)(Object(O.c)(x,"goods",t));case 2:return r=e.sent,r.data(),void 0===(s=r.data().reviews)&&(s=[]),s.push({by:n,rating:c,description:a}),e.next=9,Object(O.h)(Object(O.c)(x,"goods",t),{reviews:s});case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function A(){return(A=Object(j.a)(d.a.mark((function e(t,n,c){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Object(O.c)(x,"userRefs",c),e.next=3,Object(O.d)(a);case 3:if(void 0===e.sent.data()){e.next=6;break}return e.abrupt("return","user-error");case 6:return e.next=8,Object(m.a)(f,t,n).then((function(e){try{Object(O.g)(Object(O.c)(x,"users",e.user.uid),{diamonds:1e5,nickname:c,img:"",address:"",requested:[],recieved:[],transactions:[{img:"",who:"Minebank",amount:"-",description:"Welcome to Minebank!"}],goods:[]}),Object(O.g)(Object(O.c)(x,"userRefs",c),{uid:e.user.uid})}catch(t){console.error("Error adding document: ",t)}}));case 8:return e.abrupt("return",e.sent);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function k(){return(k=Object(j.a)(d.a.mark((function e(t,n){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(m.d)(f,t,n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function y(e){return w.apply(this,arguments)}function w(){return(w=Object(j.a)(d.a.mark((function e(t){var n,c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object(O.c)(x,"users",t),e.next=3,Object(O.d)(n);case 3:if(!(c=e.sent).exists()){e.next=8;break}return e.abrupt("return",c.data());case 8:return console.log("No such document!"),e.abrupt("return");case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function C(){return(C=Object(j.a)(d.a.mark((function e(t,n,c,a){var s,i,o,u,j,l,b,p,m;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(O.d)(Object(O.c)(x,"userRefs",t));case 2:if(!(s=e.sent).exists()){e.next=29;break}return i=s.data().uid,o=r.uid,e.next=8,Object(O.d)(Object(O.c)(x,"users",o));case 8:return u=e.sent,j=u.data().transactions,l=u.data().img,u=u.data().diamonds,e.next=14,Object(O.d)(Object(O.c)(x,"users",i));case 14:if(b=e.sent,p=b.data().transactions,m=b.data().img,b=b.data().diamonds,!(u-n>=0)){e.next=26;break}return j.push({amount:"-".concat(n),who:"".concat(t),description:"".concat(c),img:m}),e.next=22,Object(O.h)(Object(O.c)(x,"users",o),{diamonds:u-n,transactions:j});case 22:return p.push({amount:"+".concat(n),who:"".concat(a),description:"".concat(c),img:l}),e.next=25,Object(O.h)(Object(O.c)(x,"users",i),{diamonds:parseFloat(b)+parseFloat(n),transactions:p});case 25:return e.abrupt("return","success");case 26:return e.abrupt("return","You don`t have enough money for this");case 29:return e.abrupt("return",'User "'.concat(t,'" doesn`t exist'));case 30:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function S(){return(S=Object(j.a)(d.a.mark((function e(t,n,c){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(O.h)(Object(O.c)(x,"users",t),{img:n,address:c});case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function P(e,t){return E.apply(this,arguments)}function E(){return(E=Object(j.a)(d.a.mark((function e(t,n){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(O.h)(Object(O.c)(x,"users",t),n);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}Object(c.useEffect)((function(){var e=Object(m.c)(f,(function(e){s(e)}));return function(){e()}}),[]);var D={currentUser:r,register:function(e,t,n){return A.apply(this,arguments)},login:function(e,t){return k.apply(this,arguments)},logout:function(){return Object(m.e)(f)},getUserData:y,transfer:function(e,t,n,c){return C.apply(this,arguments)},createProduct:function(e,t,n,c,a,r,s){return o.apply(this,arguments)},getAllProducts:function(){return h.apply(this,arguments)},getProduct:function(e){return g.apply(this,arguments)},addReview:function(e,t,n,c){return N.apply(this,arguments)},updateProduct:function(e,t,n,c,a){return u.apply(this,arguments)},updateProfile:function(e,t,n){return S.apply(this,arguments)},buyProduct:function(e,t,n,c){return l.apply(this,arguments)},updateOrderStatus:function(e,t,n,c,a,r){return p.apply(this,arguments)}};return Object(i.jsx)(v.Provider,{value:D,children:t})}n(60);function A(e){Object(s.g)();var t=g(),n=t.logout,c=t.currentUser;return Object(i.jsxs)("div",{className:"topbar",children:[Object(i.jsxs)(l.b,{to:"/home",className:"link left",children:["Minebank",Object(i.jsx)("sup",{children:"beta"})]}),c?Object(i.jsx)("p",{className:"link right login",onClick:function(){var e=Object(j.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),n();case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),children:"Log out"}):Object(i.jsx)(l.b,{className:"link right login",to:"/login",children:"Log in"})]})}function k(){var e=Object(s.g)(),t=g().currentUser;return Object(i.jsxs)("div",{className:"container",children:[Object(i.jsx)(A,{}),Object(i.jsx)("div",{className:"frame",children:Object(i.jsxs)("div",{className:"frame-content",children:[Object(i.jsx)("h1",{className:"header",children:"Easy way to pay - Minebank"}),Object(i.jsx)(y,{}),Object(i.jsx)("button",{onClick:function(){e("/signup")},className:"button center",children:t?"Your profile":"Get card"})]})}),Object(i.jsxs)("div",{className:"frame card",children:[Object(i.jsx)("h1",{className:"header",children:"Why Minebank?"}),Object(i.jsxs)("div",{className:"info",children:[Object(i.jsxs)("div",{className:"container-info",children:[Object(i.jsx)("h1",{className:"ci-header",children:"1. No payment fee "}),Object(i.jsx)("p",{children:"We don`t charge any money for payments."})]}),Object(i.jsxs)("div",{className:"container-info",children:[Object(i.jsx)("h1",{className:"ci-header",children:"2. Easy to use"}),Object(i.jsx)("p",{children:"App is easy to use, just create an account and you are ready to do some transactions."})]}),Object(i.jsxs)("div",{className:"container-info",children:[Object(i.jsx)("h1",{className:"ci-header",children:"3. Great customer service"}),Object(i.jsx)("p",{children:"We value our customers providing timely, attentive, upbeat service to a customer."})]})]})]}),Object(i.jsx)(o,{})]})}function y(){return Object(i.jsxs)("div",{className:"card-panel",children:[Object(i.jsx)("p",{className:"card-num",children:"1234 5678 9876 5678"}),Object(i.jsx)("p",{className:"card-info",children:"minepay"})]})}var w=n(20);function C(){var e,t,n=Object(w.b)().enqueueSnackbar,a=Object(c.useState)(!1),r=Object(b.a)(a,2),o=r[0],u=r[1],p=Object(c.useState)("first"),m=Object(b.a)(p,2),O=(m[0],m[1]),h=Object(c.useState)(""),x=Object(b.a)(h,2),f=x[0],v=x[1],N=Object(c.useState)(""),k=Object(b.a)(N,2),y=k[0],C=k[1],S=Object(s.f)(),P=g(),E=P.login,D=P.currentUser,U=Object(s.g)();D&&U(null!==(e=null===(t=S.state)||void 0===t?void 0:t.from)&&void 0!==e?e:"/user");return Object(i.jsxs)("div",{children:[Object(i.jsx)(A,{}),Object(i.jsx)("div",{className:"main-container",children:Object(i.jsxs)("div",{className:"transfer-container",children:[Object(i.jsx)("p",{className:"partition-name center",children:"Welcome back!"}),Object(i.jsx)("p",{className:"tc-name",children:"Username:"}),Object(i.jsx)("input",{value:f,onChange:function(e){return v(e.target.value)},className:"input",type:"text",placeholder:"example@gmail.com"}),Object(i.jsx)("p",{className:"tc-name",children:"Password:"}),Object(i.jsx)("input",{value:y,onChange:function(e){return C(e.target.value)},className:"input",type:"password",placeholder:""}),o?Object(i.jsx)("button",{disabled:1,className:"button disabled",children:"Log In"}):Object(i.jsx)("button",{disabled:o,onClick:function(){var e=Object(j.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),u(!0),f&&y?E(f,y).catch((function(e){O(e.message),n(e.message,{variant:"error"})})).finally((function(){u(!1)})):(O("Enter valid data"),u(!1),n("Enter valid data",{variant:"error"}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),className:"button",children:" Log in"}),Object(i.jsxs)("p",{className:"subtext",children:["Don`t have an acoount? ",Object(i.jsx)(l.b,{className:"link",to:"/signup",children:"Sign up"})]})]})})]})}function S(){var e=Object(w.b)().enqueueSnackbar,t=Object(c.useState)(!1),n=Object(b.a)(t,2),a=n[0],r=n[1],o=Object(c.useState)(""),u=Object(b.a)(o,2),p=u[0],m=u[1],O=Object(c.useState)(""),h=Object(b.a)(O,2),x=h[0],f=h[1],v=Object(c.useState)(""),N=Object(b.a)(v,2),k=N[0],y=N[1],C=g().currentUser,S=g().register;return Object(i.jsxs)("div",{children:[C?Object(i.jsx)(s.a,{to:"/user"}):"",Object(i.jsx)(A,{}),Object(i.jsx)("div",{className:"main-container",children:Object(i.jsxs)("div",{className:"transfer-container",id:"auth",children:[Object(i.jsx)("p",{className:"partition-name center",children:"Sign up"}),Object(i.jsx)("p",{className:"tc-name",children:"Your nickname:"}),Object(i.jsx)("input",{value:x,onChange:function(e){return f(e.target.value)},className:"input",type:"text",placeholder:""}),Object(i.jsx)("p",{className:"tc-name",children:"Email:"}),Object(i.jsx)("input",{value:p,onChange:function(e){return m(e.target.value)},className:"input",type:"text",placeholder:"example@gmail.com"}),Object(i.jsx)("p",{className:"tc-name",children:"Password:"}),Object(i.jsx)("input",{value:k,onChange:function(e){return y(e.target.value)},className:"input",type:"password",placeholder:""}),a?Object(i.jsx)("button",{disabled:!0,className:"button disabled",children:"Register"}):Object(i.jsx)("button",{disabled:a,onClick:function(){var t=Object(j.a)(d.a.mark((function t(n){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:p&&k&&x&&x.indexOf(" ")<0?(n.preventDefault(),r(!0),S(p,k,x).then((function(t){t&&"user-error"===t&&e("Firebase: Error (auth/nickname-already-in-use)",{variant:"error"})})).catch((function(t){e(t.message,{variant:"error"})})).finally((function(){r(!1)}))):e("Please enter valid user data",{variant:"error"});case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),className:"button",children:"Register"}),Object(i.jsxs)("p",{className:"subtext",children:["Already have an acoount? ",Object(i.jsx)(l.b,{className:"link",to:"/login",children:"Log in"})]})]})})]})}var P="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAKAAAACgBAMAAAB54XoeAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAIVBMVEUAAABiMiBPKxCmVyxCHgHNe0Z9QDSBVjS3mWPfw43///9lDEuzAAAAAXRSTlMAQObYZgAAAAFiS0dECmjQ9FYAAAAHdElNRQflAhAGBCzyvfE7AAAA00lEQVRo3u3YwQ2DMAxGYVZgha7ACqzQFViBFbpCt63sSv6FFbVWe3PeO0EkPnGJHFgWIvq7NbpFgICA2dosv9oj0X4LCAj4Bu9WUg9La4CA04IjdYs0vQAB5wZP62H5c9pr3g9DChCwG3hEUp+WX51R+eUAAbuBzmgqeb4my2/LWw8QsBs4spTA8kkOEHAuUJ872nqVMx0gYEsw/Q4YJboyqQAB+4KfJ1UCv0wqQMCWoG+kpI6SBQg4Iyg10Wq9VvnnAAjYEhzRqT0qW4CAfUEiUi/W/GvpYTdY6wAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAyMS0wMi0xNlQwNjowNDo0MyswMDowMKebzaQAAAAldEVYdGRhdGU6bW9kaWZ5ADIwMjEtMDItMTZUMDY6MDQ6NDMrMDA6MDDWxnUYAAAAIHRFWHRzb2Z0d2FyZQBodHRwczovL2ltYWdlbWFnaWNrLm9yZ7zPHZ0AAAAYdEVYdFRodW1iOjpEb2N1bWVudDo6UGFnZXMAMaf/uy8AAAAYdEVYdFRodW1iOjpJbWFnZTo6SGVpZ2h0ADE2MCnLDLYAAAAXdEVYdFRodW1iOjpJbWFnZTo6V2lkdGgAMTYwujpc6wAAABl0RVh0VGh1bWI6Ok1pbWV0eXBlAGltYWdlL3BuZz+yVk4AAAAXdEVYdFRodW1iOjpNVGltZQAxNjEzNDU1NDgzzTsrWgAAABB0RVh0VGh1bWI6OlNpemUAMjk1QnErY1cAAAA2dEVYdFRodW1iOjpVUkkAZmlsZTovLy90bXAvdGh1bWJsci9pbWcxMTc3MDU3MjAwODIzNjYyMTMzNYbEgDsAAAAASUVORK5CYII=";n(66);function E(){return Object(i.jsxs)("nav",{className:"nav-container",children:[Object(i.jsx)(l.b,{className:"nav-link",to:"/user",children:"Bank"}),Object(i.jsx)(l.b,{className:"nav-link",to:"/mineshop",children:"Shop"}),Object(i.jsx)(l.b,{className:"nav-link",to:"/profile",children:"Profile"})]})}var D=n.p+"static/media/profile.18e6d1ec.png";function U(){Object(w.b)().enqueueSnackbar;var e=g(),t=e.currentUser,n=e.getUserData,a=Object(c.useState)({diamonds:"-"}),r=Object(b.a)(a,2),u=r[0],d=r[1];return Object(c.useEffect)((function(){t&&n(t.uid).then((function(e){d(e)}))}),[]),Object(i.jsxs)("div",{children:[t?"":Object(i.jsx)(s.a,{to:"/login",state:{from:"/user"}}),Object(i.jsx)(A,{}),Object(i.jsxs)("div",{className:"main-container",children:[Object(i.jsx)(M,{img:u.img,text:"".concat(u.nickname?"Hello, "+u.nickname+"!":"Loading data")}),Object(i.jsx)(I,{amount:u.diamonds}),Object(i.jsx)(E,{}),Object(i.jsx)(M,{text:"Transfer"}),Object(i.jsx)(F,{data:u}),Object(i.jsx)(W,{data:u.transactions})]}),Object(i.jsx)(o,{})]})}function M(e){var t="";return e.img&&(t=Object(i.jsx)("img",{src:e.img,className:"profile-pic",onError:function(e){e.target.onerror=null,e.target.src=D}})),Object(i.jsxs)("div",{className:"partition-container",children:[t,Object(i.jsx)("span",{className:"partition-name",children:e.text})]})}function I(e){return Object(i.jsxs)("div",{className:"wide-card",children:[Object(i.jsxs)("p",{className:"wc-amount",children:[Object(i.jsx)("span",{className:"big-font",children:e.amount})," minecoins"]}),Object(i.jsx)("p",{className:"wc-system",children:"minepay"})]})}function F(e){var t=Object(w.b)().enqueueSnackbar,n=g().transfer,a=e.data,r=Object(c.useState)(null),s=Object(b.a)(r,2),o=s[0],u=s[1],d=Object(c.useState)(null),j=Object(b.a)(d,2),l=j[0],p=j[1],m=Object(c.useState)("Money transfer"),O=Object(b.a)(m,2),h=O[0],x=O[1],f=Object(c.useState)(!1),v=Object(b.a)(f,2),N=v[0],A=v[1],k=Object(c.useState)(null),y=Object(b.a)(k,2),C=(y[0],y[1]),S=Object(c.useState)("description"),P=Object(b.a)(S,2),E=(P[0],P[1]);function D(e,n){t(e,n)}return Object(i.jsxs)("div",{className:"transfer-container",children:[Object(i.jsx)("p",{className:"tc-name",children:"To:"}),Object(i.jsx)("input",{className:"input",type:"text",placeholder:"recipient nickname",onChange:function(e){u(e.target.value)}}),Object(i.jsx)("p",{className:"tc-name",children:"Amount:"}),Object(i.jsx)("input",{className:"input",type:"number",placeholder:"",onChange:function(e){p(e.target.value)},step:"1"}),Object(i.jsx)("p",{className:"tc-name",children:"Description:"}),Object(i.jsx)("input",{className:"input",type:"text",onChange:function(e){x(e.target.value)},maxLength:100,placeholder:"Money transfer"}),!0===N?Object(i.jsx)("button",{className:"button disabled",disabled:!0,children:"Pending..."}):Object(i.jsx)("button",{className:"button",onClick:function(){A(!0),!o||!l||l<1||l>999999||parseInt(l)!==parseFloat(l)?(C("error"),E("Enter valid data"),A(!1),D("Enter valid data",{variant:"error"})):o===a.nickname?(C("error"),E("Error: you can`t transfer money to yourself"),A(!1),D("Error: you can`t transfer money to yourself",{variant:"error"})):n(o,l,h,a.nickname).then((function(e){A(!1),"success"!==e?(C("error"),E(e),D(e,{variant:"error"})):(C("success"),E("Payment successfull"),D("Payment successfull",{variant:"success"}))}))},children:"Send"})]})}function W(e){var t=e.data,n=[];if(void 0!==t){n.push(Object(i.jsx)(M,{text:"All transactions"}));for(var c=Object.keys(t).length-1;c>=0;c-=1)n.push(Object(i.jsx)(Y,{img:t[c].img,name:t[c].who,desc:t[c].description,amount:t[c].amount}))}return Object(i.jsx)("div",{children:n})}function Y(e){var t,n="";return n=0===(null===(t=e.img)||void 0===t?void 0:t.length)?Object(i.jsx)("div",{className:"ts-img initial-letter",children:e.name[0].toUpperCase()}):Object(i.jsx)("img",{className:"ts-img",src:e.img}),Object(i.jsxs)("div",{className:"transaction-card",children:[n,Object(i.jsx)("p",{className:"ts-name",children:e.name}),Object(i.jsx)("p",{className:"ts-desc",children:e.desc}),Object(i.jsx)("p",{className:"ts-amount "+("+"===e.amount[0]?"green":""),children:e.amount})]})}n(67);function V(){var e=g(),t=e.getAllProducts,n=e.currentUser,a=e.getUserData,r=Object(c.useState)([]),u=Object(b.a)(r,2),d=u[0],j=u[1],l=Object(c.useState)([]),p=Object(b.a)(l,2),m=p[0],O=p[1];return Object(c.useEffect)((function(){n&&(a(n.uid).then((function(e){O(e)})),t().then((function(e){j(e)})))}),[]),Object(i.jsxs)(c.Fragment,{children:[n?"":Object(i.jsx)(s.a,{to:"/login",state:{from:"/mineshop"}}),Object(i.jsx)(A,{}),Object(i.jsxs)("div",{className:"main-container",children:[Object(i.jsx)(M,{img:m.img,text:"".concat(m.nickname?"Hello, "+m.nickname+"!":"Loading data")}),Object(i.jsx)(J,{name:"Winter sale!",description:"Updated stock!"}),Object(i.jsx)(E,{}),Object(i.jsx)(M,{text:"All products"}),Object(i.jsx)("div",{className:"product-container",children:Object(i.jsx)(R,{data:d})}),Object(i.jsx)(M,{text:"Your orders"}),Object(i.jsx)(B,{data:m.recieved}),Object(i.jsx)(M,{text:"Your products"}),Object(i.jsxs)("div",{className:"product-container",children:[Object(i.jsx)(G,{userData:m,data:d}),Object(i.jsx)(Z,{})]}),Object(i.jsx)(M,{text:"Requested products"}),Object(i.jsx)(L,{data:m.requested,user:m})]}),Object(i.jsx)(o,{})]})}function B(e){var t=[];return void 0!==e.data&&((null===e||void 0===e?void 0:e.data.length)?e.data.forEach((function(e){t.unshift(Object(i.jsx)(q,{name:"".concat(e.name," from ").concat(e.from),price:"".concat(e.price," Mc"),desc:["Canceled","Waiting for seller","Done"][parseInt(e.status+1)],img:e.img}))})):t.push(Object(i.jsx)(Q,{text:"You haven`t made any orders yet"}))),Object(i.jsx)(c.Fragment,{children:t})}function R(e){var t=e.data,n=[];return t.forEach((function(e){var t=e.data();n.push(Object(i.jsx)(H,{id:e.id,by:t.by,price:t.price,name:t.name,url:t.img}))})),Object(i.jsx)(c.Fragment,{children:n})}function G(e){var t=[],n=e.userData.goods;return e.data.forEach((function(e){var c=e.data();n.includes(e.id)&&t.push(Object(i.jsx)(z,{id:e.id,by:"you",price:c.price,name:c.name,url:c.img,description:c.description}))})),Object(i.jsx)(c.Fragment,{children:t})}function q(e){return Object(i.jsxs)("div",{className:"transaction-card",children:[Object(i.jsx)("img",{className:"ts-img no-bg",src:e.img,onError:function(e){e.target.onerror=null,e.target.src=P}}),Object(i.jsx)("p",{className:"ts-name",children:e.name}),Object(i.jsx)("p",{className:"ts-desc",children:e.desc}),Object(i.jsx)("p",{className:"ts-amount",children:e.price})]})}function L(e){var t=[];return void 0!==e.data&&(e.data.length?e.data.forEach((function(n,c){t.unshift(Object(i.jsx)(T,{id:c,user:e.user,productData:n,done:n.done,status:parseInt(n.status),name:"".concat(n.product.name," for ").concat(n.name),price:"buttons",desc:"".concat(n.product.price," Mc").concat(n.product.address?",":""," ").concat(n.product.address),img:n.product.img}))})):t.push(Object(i.jsx)(Q,{text:"You don`t have any requested products"}))),Object(i.jsx)(c.Fragment,{children:t})}function T(e){var t=Object(w.b)().enqueueSnackbar,n=g(),a=n.updateOrderStatus,r=n.currentUser,s=Object(c.useState)(e.status),o=Object(b.a)(s,2),u=o[0],d=o[1],j=Object(c.useState)(!1),l=Object(b.a)(j,2),p=l[0],m=l[1],O=null;if(e.done){O=Object(i.jsx)("button",{className:"product-status-button-disabled",children:["Canceled","Processing","Done"][e.status+1]})}else O=Object(i.jsxs)("div",{className:"ts-button-container ",children:[Object(i.jsx)("button",{disabled:p,className:"product-status-button ".concat(p?"product-button-disabled":""," ").concat(1===u?"product-button-active ".concat(p?"product-button-active-disabled":""):""),onClick:function(e){d(1)},children:"Done"}),Object(i.jsx)("button",{disabled:p,className:"product-status-button ".concat(p?"product-button-disabled":""," ").concat(0===u?"product-button-active ".concat(p?"product-button-active-disabled":""):""),onClick:function(e){d(0)},children:"Processing"}),Object(i.jsx)("button",{disabled:p,className:"product-status-button ".concat(p?"product-button-disabled":""," ").concat(-1===u?"product-button-active ".concat(p?"product-button-active-disabled":""):""),onClick:function(e){d(-1)},children:"Cancel"}),Object(i.jsx)("button",{className:"product-status-button product-button-save ".concat(p?"product-button-disabled":""),disabled:p,onClick:function(n){n.preventDefault(),0===u?t('Pick "Canceled" or "Done"',{variant:"warning"}):(m(!0),a(e.productData,e.user,u,!0,e.id,r.uid).catch((function(e){console.log(e),t("Error",{variant:"error"}),m(!1)})).then((function(e){"Updated"===e?t("Status updated",{variant:"success"}):t(e,{variant:"error"})})))},children:"Save"})]});return Object(i.jsxs)("div",{className:"transaction-card wide",children:[Object(i.jsx)("img",{className:"ts-img no-bg",src:e.img,onError:function(e){e.target.onerror=null,e.target.src=P}}),Object(i.jsx)("p",{className:"ts-name",children:e.name}),Object(i.jsx)("p",{className:"ts-desc",children:e.desc}),Object(i.jsx)("div",{className:"ts-amount",children:O})]})}function Q(e){return Object(i.jsx)("div",{className:"no-data",children:e.text})}function Z(){var e=Object(w.b)().enqueueSnackbar,t=Object(c.useState)(null),n=Object(b.a)(t,2),a=n[0],r=n[1],s=Object(c.useState)(null),o=Object(b.a)(s,2),u=o[0],d=o[1],j=Object(c.useState)(null),l=Object(b.a)(j,2),p=l[0],m=l[1],O=Object(c.useState)(null),h=Object(b.a)(O,2),x=h[0],f=h[1],v=g(),N=v.createProduct,A=v.currentUser,k=v.getUserData;return Object(i.jsxs)("div",{className:"product-card padding-bottom",children:[Object(i.jsx)("div",{children:"Img url"}),Object(i.jsx)("input",{className:"input whitesmoked",onChange:function(e){r(e.target.value)}}),Object(i.jsx)("div",{children:"Product name"}),Object(i.jsx)("input",{className:"input whitesmoked",onChange:function(e){d(e.target.value)}}),Object(i.jsx)("div",{children:"Price"}),Object(i.jsx)("input",{className:"input whitesmoked",onChange:function(e){m(e.target.value)}}),Object(i.jsx)("div",{children:"Description"}),Object(i.jsx)("input",{className:"input whitesmoked",onChange:function(e){f(e.target.value)}}),Object(i.jsx)("div",{className:"edit-button-container",children:Object(i.jsx)("button",{className:"edit-button",onClick:function(){A&&(a&&u&&x&&Number.isInteger(parseFloat(p))&&p>0&&p<1e6?k(A.uid).then((function(t){return N(a,u,p,x,t.nickname,A.uid,t.goods).then((function(){e("Product created",{variant:"success"})}))})):(console.log(p),e("Enter valid data",{variant:"error"})))},children:"Create"})})]})}function z(e){var t=Object(w.b)().enqueueSnackbar,n=Object(c.useState)(!1),a=Object(b.a)(n,2),r=a[0],s=a[1],o=g().updateProduct,u=Object(c.useState)(e.url),d=Object(b.a)(u,2),j=d[0],l=d[1],p=Object(c.useState)(e.name),m=Object(b.a)(p,2),O=m[0],h=m[1],x=Object(c.useState)(e.price),f=Object(b.a)(x,2),v=f[0],N=f[1],A=Object(c.useState)(e.description),k=Object(b.a)(A,2),y=k[0],C=k[1],S="";return S=r?Object(i.jsxs)("div",{className:"product-card",children:[Object(i.jsx)("div",{children:"Img url"}),Object(i.jsx)("input",{className:"input whitesmoked",value:j,onChange:function(e){return l(e.target.value)}}),Object(i.jsx)("div",{children:"Product name"}),Object(i.jsx)("input",{className:"input whitesmoked",value:O,onChange:function(e){return h(e.target.value)}}),Object(i.jsx)("div",{children:"Price"}),Object(i.jsx)("input",{className:"input whitesmoked",value:v,onChange:function(e){return N(e.target.value)}}),Object(i.jsx)("div",{children:"Description"}),Object(i.jsx)("input",{className:"input whitesmoked",value:y,onChange:function(e){return C(e.target.value)}}),Object(i.jsxs)("div",{className:"edit-button-container",children:[Object(i.jsx)("button",{className:"edit-button",onClick:function(n){n.preventDefault(),j&&O&&y&&Number.isInteger(parseFloat(v))&&v>0&&v<1e6?o(e.id,j,O,v,y).then((function(){t("Product updated",{variant:"success"})})):t("Enter valid data",{variant:"error"})},children:"Save"}),Object(i.jsx)("button",{className:"edit-button",onClick:function(e){e.preventDefault(),s(!1)},children:"Cancel"})]})]}):Object(i.jsxs)("div",{className:"product-card",children:[Object(i.jsx)("img",{className:"product-img",src:e.url,onError:function(e){e.target.onerror=null,e.target.src=P}}),Object(i.jsx)("div",{className:"product-name",children:e.name}),Object(i.jsxs)("div",{className:"product-price",children:[e.price," ",Object(i.jsx)("span",{className:"thin",children:"Mc"})]}),Object(i.jsxs)("div",{className:"product-detail",children:["By ",e.by]}),Object(i.jsx)("button",{className:"product-button",onClick:function(e){e.preventDefault(),s(!0)},children:"Edit"})]}),Object(i.jsx)("div",{children:S})}function H(e){var t=Object(s.g)();return Object(i.jsxs)("div",{className:"product-card",children:[Object(i.jsx)("img",{className:"product-img",src:e.url,onError:function(e){e.target.onerror=null,e.target.src=P}}),Object(i.jsx)("div",{className:"product-name",children:e.name}),Object(i.jsxs)("div",{className:"product-price",children:[e.price," ",Object(i.jsx)("span",{className:"thin",children:"Mc"})]}),Object(i.jsxs)("div",{className:"product-detail",children:["By ",e.by]}),Object(i.jsx)("button",{className:"product-button",onClick:function(){t("".concat(e.id))},children:"View"})]})}function J(e){return Object(i.jsxs)("div",{className:"promo-card",children:[Object(i.jsx)("div",{className:"promo-name",children:e.name}),Object(i.jsx)("div",{className:"promo-description",children:e.description})]})}n(68);var X=n.p+"static/media/back.58553c7d.svg";function K(){var e=Object(w.b)().enqueueSnackbar,t=Object(s.h)(),n=[],a=g(),r=a.getProduct,u=a.currentUser,d=a.getUserData,j=a.buyProduct,l=Object(c.useState)([]),p=Object(b.a)(l,2),m=p[0],O=p[1],h=Object(c.useState)([]),x=Object(b.a)(h,2),f=x[0],v=x[1],N=Object(s.g)();return Object(c.useEffect)((function(){window.scrollTo(0,0),r(t.productId).then((function(e){O(e.data())})),u&&d(u.uid).then((function(e){v(e)}))}),[]),n=m?Object(i.jsxs)(c.Fragment,{children:[Object(i.jsx)(A,{}),Object(i.jsxs)("div",{className:"main-container",children:[Object(i.jsxs)("div",{className:"vp-back-container",onClick:function(){N("/mineshop")},children:[Object(i.jsx)("img",{className:"vp-back-arrow",src:X}),Object(i.jsx)("div",{className:"vp-back-text",children:"Go back"})]}),Object(i.jsxs)("div",{className:"vp-product-container",children:[Object(i.jsx)("img",{className:"vp-img",src:m.img,onError:function(e){e.target.onerror=null,e.target.src=P}}),Object(i.jsxs)("div",{className:"vp-info-container",children:[Object(i.jsx)("h1",{className:"vp-name",children:m.name}),Object(i.jsxs)("div",{className:"vp-price",children:[m.price," ",Object(i.jsx)("span",{className:"thin",children:"Mc"})]}),Object(i.jsx)("p",{className:"vp-description",children:m.description}),Object(i.jsx)("button",{className:"vp-button",onClick:function(t){t.preventDefault(),j(m,m.uid,f,u.uid).then((function(t){"ok"===t?e("Order created",{preventDuplicate:!1,variant:"success"}):e(t,{variant:"error"})}))},children:"Purchase"})]})]}),Object(i.jsx)(te,{text:"Reviews"}),Object(i.jsx)(_,{id:t.productId}),Object(i.jsx)($,{data:m.reviews})]}),Object(i.jsx)(o,{})]}):Object(i.jsxs)(c.Fragment,{children:[Object(i.jsx)(A,{}),Object(i.jsxs)("div",{className:"main-container",children:[Object(i.jsxs)("div",{className:"vp-back-container",onClick:function(){N(-1)},children:[Object(i.jsx)("img",{className:"vp-back-arrow",src:X}),Object(i.jsx)("div",{className:"vp-back-text",children:"Go back"})]}),Object(i.jsx)(ne,{text:"Looks like this product doesn`t exist"})]}),Object(i.jsx)(o,{})]}),Object(i.jsxs)(c.Fragment,{children:[u?"":Object(i.jsx)(s.a,{to:"/login",state:{from:"/mineshop/"+t.productId}}),n]})}function _(e){var t=Object(w.b)().enqueueSnackbar,n=g(),a=n.currentUser,r=n.getUserData,s=n.addReview,o=Object(c.useState)(50),u=Object(b.a)(o,2),d=u[0],j=u[1],l=Object(c.useState)(""),p=Object(b.a)(l,2),m=p[0],O=p[1],h=Object(c.useState)(!1),x=Object(b.a)(h,2),f=x[0],v=x[1];return Object(i.jsxs)("div",{className:"review-container",children:[Object(i.jsx)("div",{className:"bold",children:"Your review: "}),Object(i.jsx)("input",{className:"range pointer ".concat(d<20?"":d<30?"orange":d<40?"green":"lime"),type:"range",min:"0",max:"50",value:d,onChange:function(e){j(e.target.value)}}),Object(i.jsxs)("span",{className:"review-rating",children:[d/10,"/5"]}),Object(i.jsx)("input",{type:"text",className:"input whitesmoked left-float",placeholder:"Type what you think about product",onChange:function(e){O(e.target.value)}}),Object(i.jsx)("button",{type:"submit",className:"publish-button",onClick:function(n){n.preventDefault();r(a.uid).then((function(n){!0===f?t("Please, no spaming(refresh page if want you want to add another)",{variant:"warning"}):(v(!0),s(e.id,n.nickname,d,m).catch((function(e){t(e,{variant:"error"})})).then((function(){t("Review posted",{variant:"success"})})))}))},children:"Publish"})]})}function $(e){var t=e.data,n=[],c=[],a=0;if(void 0!==t&&0!==Object.keys(t).length){for(var r=Object.keys(t).length-1;r>=0;r-=1)c.push(Object(i.jsx)(ee,{name:t[r].by,rating:t[r].rating,description:t[r].description})),a+=parseFloat(t[r].rating);Object.keys(t).length>1&&n.push(Object(i.jsx)(ee,{name:"AVERAGE SCORE",rating:Math.round(a/Object.keys(t).length*10)/10})),n.push(c)}else n.push(Object(i.jsx)(ne,{text:"No reviews yet"}));return Object(i.jsx)("div",{children:n})}function ee(e){var t=e.rating,n=e.name,c=e.description;return Object(i.jsxs)("div",{className:"review-container",children:[Object(i.jsx)("span",{className:"bold",children:n}),Object(i.jsx)("input",{className:"range lr-margin ".concat(t<20?"":t<30?"orange":t<40?"green":"lime"," no-cursor"),type:"range",min:"0",max:"50",value:t,disabled:!0}),Object(i.jsxs)("span",{className:"review-rating lr-margin",children:[t/10,"/5"]}),Object(i.jsx)("p",{children:c})]})}function te(e){var t="";return e.img&&(t=Object(i.jsx)("img",{src:e.img,className:"profile-pic"})),Object(i.jsxs)("div",{className:"partition-container",children:[t,Object(i.jsx)("span",{className:"partition-name",children:e.text})]})}function ne(e){return Object(i.jsx)("div",{className:"no-data",children:e.text})}var ce=n(37);function ae(){var e=g(),t=e.currentUser,n=e.getUserData,a=Object(c.useState)({img:null}),r=Object(b.a)(a,2),u=r[0],d=r[1],j=Object(c.useState)(!0),l=Object(b.a)(j,2),p=l[0],m=l[1];return Object(c.useEffect)((function(){t&&n(t.uid).then((function(e){d(e),m(!1)}))}),[]),Object(i.jsxs)("div",{children:[t?"":Object(i.jsx)(s.a,{to:"/login",state:{from:"/profile"}}),Object(i.jsx)(A,{}),Object(i.jsxs)("div",{className:"main-container",children:[Object(i.jsx)(M,{img:u.img,text:"".concat(u.nickname?"Hello, "+u.nickname+"!":"Loading data")}),Object(i.jsx)(I,{amount:u.diamonds}),Object(i.jsx)(E,{}),Object(i.jsx)(M,{text:"Profile info"}),p?Object(i.jsx)(Q,{text:"Loading"}):Object(i.jsx)(re,{img:u.img+"a",address:u.address,uid:null===t||void 0===t?void 0:t.uid})]}),Object(i.jsx)(o,{})]})}function re(e){var t=Object(w.b)().enqueueSnackbar,n=g().updateProfile,a=Object(c.useState)(e.img),r=Object(b.a)(a,2),s=r[0],o=r[1],u=Object(c.useState)(e.address),d=Object(b.a)(u,2),j=d[0],l=d[1];return Object(i.jsxs)(ce.Fragment,{children:[Object(i.jsx)("p",{className:"tc-name",children:"Profile image url:"}),Object(i.jsx)("input",{className:"input",value:s,onChange:function(e){o(e.target.value)}}),Object(i.jsx)("p",{className:"tc-name",children:"Delivery adress:"}),Object(i.jsx)("input",{className:"input",value:j,onChange:function(e){l(e.target.value)}}),Object(i.jsx)("button",{className:"button",onClick:function(c){c.preventDefault(),n(e.uid,s,j).then((function(){t("Profile updated",{variant:"success"})}))},children:"Save"})]})}function se(){var e=g(),t=e.currentUser,n=e.getUserData,a=Object(c.useState)({diamonds:"-"}),r=Object(b.a)(a,2),s=r[0],u=r[1];return Object(c.useEffect)((function(){t&&n(t.uid).then((function(e){u(e)}))}),[]),Object(i.jsxs)("div",{children:[Object(i.jsx)(A,{}),Object(i.jsxs)("div",{className:"main-container",children:[Object(i.jsx)(M,{img:s.img,text:"".concat(s.nickname?"Hello, "+s.nickname+"!":"Loading data")}),Object(i.jsx)(I,{amount:s.diamonds}),Object(i.jsx)(E,{}),Object(i.jsx)(Q,{text:"Coming soon"}),Object(i.jsx)(Q,{text:"btw why are you here?"})]}),Object(i.jsx)(o,{})]})}var ie=function(){return Object(i.jsx)(N,{children:Object(i.jsxs)(s.d,{children:[Object(i.jsx)(s.b,{path:"user",element:Object(i.jsx)(U,{})}),Object(i.jsx)(s.b,{path:"mineshop",element:Object(i.jsx)(V,{})}),Object(i.jsx)(s.b,{path:"mineshop/:productId",element:Object(i.jsx)(K,{})}),Object(i.jsx)(s.b,{path:"profile",element:Object(i.jsx)(ae,{})}),Object(i.jsx)(s.b,{path:"calculators",element:Object(i.jsx)(se,{})}),Object(i.jsx)(s.b,{path:"login",element:Object(i.jsx)(C,{})}),Object(i.jsx)(s.b,{path:"signup",element:Object(i.jsx)(S,{})}),Object(i.jsx)(s.b,{path:"*",element:Object(i.jsx)(k,{})})]})})},oe=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,81)).then((function(t){var n=t.getCLS,c=t.getFID,a=t.getFCP,r=t.getLCP,s=t.getTTFB;n(e),c(e),a(e),r(e),s(e)}))};r.a.render(Object(i.jsx)(w.a,{children:Object(i.jsx)(l.a,{children:Object(i.jsx)(ie,{})})}),document.getElementById("root")),oe()}},[[69,1,2]]]);
//# sourceMappingURL=main.d52ee9b0.chunk.js.map